<h1>Your payments</h1>

<%= render 'layouts/errors', object: @payment %>

<% if @payments.present? %>
  <ul>
    <% @payments.each do |payment| %>
      <li>
        <%= number_to_currency(payment.amount / 100.00) %>
        paid on
        <%= payment.created_at.strftime("%F") %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>Looks like you haven't made any payments yet.</p>
<% end %>

<% if current_user.upfront_payment_due? %>
  <div class="action-buttons">
    <%= form_for @payment, url: upfront_payments_path do |f| %>
      <%= f.submit "Make upfront payment of #{number_to_currency(@payment.amount / 100.00)}", data: { confirm: "Make upfront payment?" }, class: 'btn btn-large btn-primary' %>
    <% end %>
  </div>
<% end %>

<% if current_user.ready_to_start_recurring_payments? %>
  <div class="action-buttons">
    <%= form_for @payment, url: recurring_payments_path do |f| %>
      <%= f.submit "Start recurring payments of #{number_to_currency(@payment.amount / 100.00)}", data: { confirm: "Start recurring payments?" }, class: 'btn btn-large btn-primary' %>
    <% end %>
  </div>
<% end %>

<p>
  If you have any questions or need to stop your payments, contact Michael.
</p>
