<div class="row">
  <div class="span12">
    <header>
      <h1><%= current_cohort.description %> Student Sign-in </h1>
    </header>
  </div>
</div>

<div class="pair-sign-in well">
  <h2>Pair log in</h2>
  <%= form_for AttendanceRecord.new do |f| %>
    <%= select_tag "pair_ids[]", options_from_collection_for_select(@students, :id, :name), { prompt: 'Select pair', required: true } %>
    <%= select_tag "pair_ids[]", options_from_collection_for_select(@students, :id, :name), { prompt: 'Select pair', required: true } %>
    <p><%= f.submit "Pair log in", class: 'btn btn-success' %></p>
  <% end %>
</div>

<hr>

<div class="row">
  <%= div_for @students, class: 'well span2' do |student| %>
    <h2><%= student.name %></h2>
    <% if student.signed_in_today? %>
      <p class="text-success"><span class="check">&#x2713;</span> Signed in</p>
        <% if student.signed_out_today? %>
          <p class="text-success"><span class="check">&#x2713;</span> Signed out</p>
        <% else %>
          <%= form_for student.attendance_records.today.first do |f| %>
            <%= f.hidden_field "pair_ids[]", value: student.id %>
            <%= f.hidden_field :signing_out, value: true %>
            <%= f.submit "I'm leaving", class: 'btn btn-warning' %>
          <% end %>
        <% end %>
    <% else %>
      <%= form_for AttendanceRecord.new do |f| %>
        <%= hidden_field_tag "pair_ids[]", student.id %>
        <%= f.submit "I'm soloing", class: 'btn btn-primary' %>
      <% end %>
    <% end %>
  <% end %>
</div>
