<h1 class="page-header">Attendance by day</h1>

<%= form_for :attendance_records, url: cohort_attendance_statistics_path(@cohort), html: { method: :post } do |f| %>
  <%= f.select :day, options_for_select(formatted_class_days, selected: day_value), {}, { class: 'span3' } %>
  <p><%= f.submit 'Submit', class: 'btn btn-primary' %></p>
<% end %>

<h3>Attendance for <%= @day.strftime("%A %B %d, %Y") %></h3>
<hr>
<% @cohort.students.each do |student| %>
  <ul class="span12 unstyled">
      <li>
          <span class="span3"><%= link_to student.name, student, class: 'unstyled-link' %></span>
          <span>
            <% if !student.attendance_record_on_day(@day) %>
              <span class="btn btn-danger span3" disabled>Absent</span>
            <% elsif student.attendance_record_on_day(@day).tardy %>
              <span class="btn btn-warning span3" disabled>Tardy</span>
            <% elsif student.attendance_record_on_day(@day).left_early %>
              <span class="btn btn-warning span3" disabled>Left early</span>
            <% else %>
              <span class="btn btn-success span3" disabled>On time</span>
            <% end %>
          </span>
          <span class="span2">
            <%= link_to 'Edit', new_attendance_record_amendment_path(student: student, day: @day, attendance_statistics: true), class: 'unstyled-link'  %>
          </span>
          <span><%= student.pair_on_day(@day) ? student.pair_on_day(@day).name : 'Solo' %></span>
      </li>
  </ul>
<% end %>
